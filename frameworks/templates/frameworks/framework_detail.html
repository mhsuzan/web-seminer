{% extends 'frameworks/base.html' %}

{% block title %}{{ framework.name }} - KG Quality Frameworks{% endblock %}

{% block content %}
<div class="card">
    <h2>{{ framework.name }}</h2>
    <div style="margin-top: 1rem;">
        <table style="width: 100%;">
            <tbody>
                {# Authors row hidden #}
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Year:</td>
                    <td>{{ framework.year|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Title:</td>
                    <td>{{ framework.title|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Abstract:</td>
                    <td>{{ framework.description|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Objectives:</td>
                    <td>{{ framework.objectives|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Methodology:</td>
                    <td>{{ framework.methodology|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Algorithm Used:</td>
                    <td>{{ framework.algorithm_used|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Top Model:</td>
                    <td>{{ framework.top_model|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Accuracy:</td>
                    <td>{{ framework.accuracy|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Advantages:</td>
                    <td>{{ framework.advantages|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Drawbacks:</td>
                    <td>{{ framework.drawbacks|default:"—" }}</td>
                </tr>
                <tr>
                    <td style="font-weight: bold; vertical-align: top;">Source:</td>
                    <td>
                        {% if framework.source %}
                            <a href="{% url 'frameworks:source_detail' %}?source={{ framework.source|urlencode }}" style="color: var(--primary-color);">
                                {{ framework.source }}
                            </a>
                            <a href="{% url 'frameworks:source_edit_framework' framework.id %}" class="btn btn-sm" style="margin-left: 0.5rem; padding: 0.25rem 0.75rem; font-size: 0.875rem;">Edit</a>
                        {% else %}
                            <span style="color: var(--text-light);">—</span>
                            <a href="{% url 'frameworks:source_edit_framework' framework.id %}" class="btn btn-sm" style="margin-left: 0.5rem; padding: 0.25rem 0.75rem; font-size: 0.875rem;">Add Source</a>
                        {% endif %}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="card">
    <h3>Criteria ({{ framework.criteria.count }})</h3>
    {% if framework.criteria.all %}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                {# Category column hidden #}
                <th>Description</th>
                <th>Definitions</th>
            </tr>
        </thead>
        <tbody>
            {% for criterion in framework.criteria.all %}
            <tr>
                <td><strong>{{ criterion.name }}</strong></td>
                {# Category column hidden #}
                <td>{{ criterion.description|truncatewords:20|default:"—" }}</td>
                <td>
                    {% if criterion.definitions.all %}
                        <ul style="margin: 0; padding-left: 1.5rem;">
                            {% for definition in criterion.definitions.all %}
                            <li style="margin-bottom: 0.5rem;">{{ definition.definition_text|truncatewords:15 }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        —
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No criteria defined for this framework.</p>
    {% endif %}
</div>

<div style="margin-top: 1rem;">
    <a href="{% url 'frameworks:framework_list' %}" class="btn btn-secondary">Back to Frameworks</a>
    <a href="{% url 'frameworks:compare_frameworks' %}?frameworks={{ framework.id }}" class="btn">Compare with Others</a>
</div>
{% endblock %}
